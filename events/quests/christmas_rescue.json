{
  "meta": {
    "title": "Quest for the Christmas Heart",
    "description": "Defeat Grinchy's minions and retrieve the stolen Christmas Heart!"
  },
  "startMap": "map_1",
  "maps": {
    "map_1": {
      "layout": [
        [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
        [2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2],
        [2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2],
        [2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2, 2],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
        [2, 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
        [2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 2, 2],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 2],
        [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
      ],
      "start": { "x": 1, "y": 1 },
      "portals": [ { "x": 10, "y": 10, "toMap": "map_2" } ],
      "npcs": [
        {
          "x": 5, "y": 3, "name": "Village Elder", "sprite": "üéÖ",
          "dialogue": ["The bridge is out!", "Solve this to fix it."],
          "action": "gate_npc_1", "hideOnFlag": "solved_npc_1"
        },
        {
          "x": 6, "y": 6, "name": "Ultimate Snowbell Snapper", "sprite": "üê¢",
          "dialogue": ["SNAP! You shall not pass!"],
          "action": "gate_monster_1", "hideOnFlag": "defeated_m1"
        }
      ]
    },
    "map_2": {
      "layout": [
        [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
        [2, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 2],
        [2, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 2],
        [2, 0, 2, 0, 2, 2, 2, 2, 0, 2, 0, 2],
        [2, 0, 2, 0, 2, 0, 0, 2, 0, 2, 0, 2],
        [2, 0, 2, 0, 2, 0, 0, 2, 0, 2, 0, 2],
        [2, 0, 2, 0, 2, 2, 2, 2, 0, 2, 0, 2],
        [2, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 2],
        [2, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 2],
        [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 2],
        [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
      ],
      "start": { "x": 1, "y": 1 },
      "portals": [ { "x": 10, "y": 10, "toMap": "map_3" } ],
      "npcs": [
        {
          "x": 1, "y": 5, "name": "Lost Elf", "sprite": "üßù",
          "dialogue": ["I am stuck in this maze.", "Help me calculate the way out!"],
          "action": "gate_npc_2", "hideOnFlag": "solved_npc_2"
        },
        {
          "x": 10, "y": 5, "name": "Ultimate Canous", "sprite": "üê∫",
          "dialogue": ["Grrr! This forest is mine!"],
          "action": "gate_monster_2", "hideOnFlag": "defeated_m2"
        }
      ]
    },
    "map_3": {
      "layout": [
        [3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
        [3, 5, 5, 5, 3, 3, 3, 3, 3, 3, 3, 3],
        [3, 5, 5, 5, 3, 5, 5, 5, 5, 5, 5, 3],
        [3, 5, 5, 5, 3, 5, 5, 5, 5, 5, 5, 3],
        [3, 3, 0, 3, 3, 5, 5, 5, 5, 5, 5, 3],
        [3, 3, 3, 3, 3, 3, 3, 3, 0, 3, 3, 3],
        [3, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 3],
        [3, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 3],
        [3, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 3],
        [3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
        [3, 5, 5, 5, 5, 5, 5, 5, 5, 5, 8, 3],
        [3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3]
      ],
      "start": { "x": 1, "y": 1 },
      "portals": [ { "x": 10, "y": 10, "toMap": "map_4" } ],
      "npcs": [
        {
          "x": 2, "y": 4, "name": "Snowman Guard", "sprite": "‚òÉÔ∏è",
          "dialogue": ["The ice bridge is broken.", "Math is the only glue!"],
          "action": "gate_npc_3", "hideOnFlag": "solved_npc_3"
        },
        {
          "x": 8, "y": 5, "name": "Ultimate Carolgeist", "sprite": "üëª",
          "dialogue": ["Freezing winds stop you here!"],
          "action": "gate_monster_3", "hideOnFlag": "defeated_m3"
        }
      ]
    },
    "map_4": {
      "layout": [
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
        [1, 5, 5, 5, 1, 5, 5, 5, 5, 5, 5, 1],
        [1, 5, 1, 5, 1, 5, 1, 1, 1, 1, 5, 1],
        [1, 5, 1, 5, 1, 5, 1, 1, 1, 1, 5, 1],
        [1, 5, 1, 5, 0, 5, 1, 1, 1, 1, 5, 1],
        [1, 5, 1, 1, 1, 1, 1, 1, 1, 1, 5, 1],
        [1, 5, 1, 5, 5, 5, 5, 5, 5, 5, 5, 1],
        [1, 5, 1, 5, 1, 1, 1, 1, 1, 1, 1, 1],
        [1, 5, 1, 5, 0, 5, 5, 5, 5, 5, 5, 1],
        [1, 5, 1, 1, 1, 1, 1, 1, 1, 1, 5, 1],
        [1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 8, 1],
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
      ],
      "start": { "x": 1, "y": 1 },
      "portals": [ { "x": 10, "y": 10, "toMap": "map_5" } ],
      "npcs": [
        {
          "x": 4, "y": 4, "name": "Yeti Guide", "sprite": "ü¶ç",
          "dialogue": ["The cliff is too steep.", "Answer to build a ladder!"],
          "action": "gate_npc_4", "hideOnFlag": "solved_npc_4"
        },
        {
          "x": 4, "y": 8, "name": "Ultimate Buller", "sprite": "üêÇ",
          "dialogue": ["This is the final barrier!"],
          "action": "gate_monster_4", "hideOnFlag": "defeated_m4"
        }
      ]
    },
    "map_5": {
      "layout": [
        [9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9],
        [9, 5, 5, 5, 5, 3, 3, 5, 5, 5, 5, 9],
        [9, 5, 9, 9, 5, 3, 3, 5, 9, 9, 5, 9],
        [9, 5, 9, 5, 5, 5, 5, 5, 5, 9, 5, 9],
        [9, 5, 9, 5, 3, 3, 3, 3, 5, 9, 5, 9],
        [9, 5, 5, 5, 3, 5, 5, 3, 5, 5, 5, 9],
        [9, 5, 9, 5, 3, 5, 5, 3, 5, 9, 5, 9],
        [9, 5, 9, 5, 3, 3, 3, 3, 5, 9, 5, 9],
        [9, 5, 9, 5, 5, 5, 5, 5, 5, 9, 5, 9],
        [9, 5, 9, 9, 9, 5, 9, 9, 9, 9, 5, 9],
        [9, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 9],
        [9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9]
      ],
      "start": { "x": 5, "y": 10 },
      "portals": [],
      "npcs": [
        {
          "x": 5, "y": 5, "name": "Grinchy", "sprite": "üë∫",
          "dialogue": ["I hate happiness!", "The Heart stays with me!"],
          "action": "gate_boss", "hideOnFlag": "grinchy_defeated"
        },
        {
          "x": 5, "y": 1, "name": "The Heart", "sprite": "‚ù§Ô∏è",
          "dialogue": ["You saved Christmas!"],
          "action": null
        }
      ]
    }
  },
  "gates": {
    "gate_npc_1": { "type": "academic_challenge", "questionCount": 3, "onSuccess": "solved_npc_1" },
    "gate_monster_1": { "type": "battle", "enemyId": "Ultimate Snowbell Snapper", "onSuccess": "defeated_m1" },
    
    "gate_npc_2": { "type": "academic_challenge", "questionCount": 3, "onSuccess": "solved_npc_2" },
    "gate_monster_2": { "type": "battle", "enemyId": "Ultimate Canous", "onSuccess": "defeated_m2" },

    "gate_npc_3": { "type": "academic_challenge", "questionCount": 3, "onSuccess": "solved_npc_3" },
    "gate_monster_3": { "type": "battle", "enemyId": "Ultimate Carolgeist", "onSuccess": "defeated_m3" },

    "gate_npc_4": { "type": "academic_challenge", "questionCount": 3, "onSuccess": "solved_npc_4" },
    "gate_monster_4": { "type": "battle", "enemyId": "Ultimate Buller", "onSuccess": "defeated_m4" },

    "gate_boss": { 
      "type": "battle", 
      "enemyId": "Grinchy", 
      "onSuccess": "grinchy_defeated",
      "rewardData": {
        "name": "Rudolf",
        "type": "Rudolf_01",
        "rarity": "epic",
        "element": ["light", "ice"],
        "hp": 60,
        "image": "https://raw.githubusercontent.com/rye-ai/MathPetRPG/main/sprite/mons/xmasreward/1.png",
        "imageStyle": "blend-multiply",
        "emoji": "üê∫",
        "evolutions": [
          {
            "level": 10,
            "cost": 100,
            "baseHP": 100,
            "rarity": "epic",
            "element": ["light", "ice"],
            "image": "https://raw.githubusercontent.com/rye-ai/MathPetRPG/main/sprite/mons/xmasreward/1.png",
            "imageStyle": "blend-multiply"
          },
          {
            "level": 20,
            "cost": 200,
            "baseHP": 200,
            "rarity": "legendary",
            "element": ["light", "ice"],
            "image": "https://raw.githubusercontent.com/rye-ai/MathPetRPG/main/sprite/mons/xmasreward/1.png",
            "imageStyle": "blend-multiply"
          }
        ]
      }
    }
  }
}
